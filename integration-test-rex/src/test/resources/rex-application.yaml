scheduler:
  baseUrl: "http://localhost:5679"

quarkus:

  http:
    cors: true
    port: 8080

  oidc:
    enabled: true
    auth-server-url: http://keycloak:8080/realms/newcastle-testcontainer
    client-id: rex
    token:
      issuer: any
    credentials:
      jwt:
        issuer: any
#    credentials:
#      secret: secret
    application-type: SERVICE
    tls:
      verification: none

  infinispan-client:
    hosts: infinispan:11222
    client-intelligence: BASIC
    use-schema-registration: true
    use-auth: true
    username: admin
    password: password
    cache:
      "rex-counter":
        configuration-uri: "counter-configuration.xml"
        near-cache-mode: disabled
        near-cache-max-entries: -1
      "rex-tasks":
        configuration-uri: "task-configuration.xml"
        near-cache-mode: invalidated
        near-cache-max-entries: 100
      "rex-constraints":
        configuration-uri: "constraints-configuration.xml"
        near-cache-mode: invalidated
        near-cache-max-entries: 100
  swagger-ui:
    always-include: true

  log:
    console:
      format: "%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c{3.}] (%t) %s%e%n"
    category:
      "org.jboss.pnc":
        level: DEBUG
      "com.arjuna.ats.jta":
        # Set to WARN if you want to see all the exceptions
        level: ERROR
      "io.quarkus.oidc":
        level: TRACE
    min-level: FINEST
  vertx:
    max-event-loop-execute-time: 10s

"%test":
  scheduler:
    baseUrl: http://localhost:8081
  quarkus:
    log:
      category:
        "org.testcontainers":
          level: DEBUG
      min-level: TRACE
    oidc:
      enabled: false
    transaction-manager:
      default-transaction-timeout: 10m
    http:
      port: 8081
    infinispan-client:
      client-intelligence: BASIC
      use-schema-registration: true
      use-auth: true
      auth-username: admin
      auth-password: password
      cache:
        "rex-counter":
          configuration-uri: "counter-configuration.xml"
          near-cache-mode: disabled
          near-cache-max-entries: -1
        "rex-tasks":
          configuration-uri: "task-configuration.xml"
          near-cache-mode: invalidated
          near-cache-max-entries: 100
        "rex-constraints":
          configuration-uri: "constraints-configuration.xml"
          near-cache-mode: invalidated
          near-cache-max-entries: 100
      devservices:
#        image-name: "infinispan/server:13.0.5.Final-2"
        image-name: "infinispan/server:14.0.2.Final"

"%dev":
  scheduler:
    baseUrl: http://localhost:8181
  disable:
    authorization: true
  quarkus:
    oidc:
      enabled: false
    transaction-manager:
      default-transaction-timeout: 10m
    http:
      port: 8181
    infinispan-client:
      client-intelligence: BASIC
      use-schema-registration: true
      use-auth: true
      auth-username: admin
      auth-password: password
      cache:
        "counter":
          configuration-uri: "counter-configuration.xml"
          near-cache-mode: disabled
          near-cache-max-entries: -1
        "near-tasks":
          configuration-uri: "task-configuration.xml"
          near-cache-mode: invalidated
          near-cache-max-entries: 100
        "near-constraints":
          configuration-uri: "constraints-configuration.xml"
          near-cache-mode: invalidated
          near-cache-max-entries: 100
    log:
      category:
        "org.jboss.pnc":
          level: TRACE
        "io.quarkus.infinispan":
          level: TRACE
      min-level: FINEST
